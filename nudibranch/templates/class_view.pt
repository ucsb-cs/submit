<div metal:use-macro="_LAYOUT">
<div metal:fill-slot="content">
  <p>Info for ${class_.name}</p>

  <p tal:condition="class_admin">
    <h3 tal:condition="class_.is_locked">This class is locked. You will not be
      able to make any changes.</h3>
    <a tal:condition="not class_.is_locked" href="${_R('project_new', class_name=class_.name)}">Add project</a>
  </p>

  <p>Projects</p>
  <ul>
    <div tal:repeat="project sorted(class_.projects, key=lambda x: x.name)" tal:omit-tag="">
      <li tal:condition="project.can_access(request.user)">
        <span tal:condition="class_admin" tal:omit-tag="">
          <a href="${_R('project_item_summary', class_name=project.class_.name, project_id=project.id)}">${project.name}</a>
          <span tal:condition="project.is_ready" tal:omit-tag="">(ready for submission)</span>
        </span>
        <a tal:condition="not class_admin"
	   href="${_R('project_item_detailed', class_name=project.class_.name, project_id=project.id, username=request.user.username)}">
          ${project.name}</a>
      </li>
    </div>
  </ul>
</div>
</div>
